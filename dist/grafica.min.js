"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdateChart=createOrUpdateChart,exports.showError=showError,exports.clearError=clearError;var currentChart=null;function getChartDataFromTable(){try{var r=Array.from(document.querySelectorAll("#tableHeader th")).map(function(r){return r.textContent.trim().toLowerCase()});console.log("Headers encontrados:",r);var i=r.findIndex(function(r){return["dia","día","day","fecha"].includes(r)}),c=r.findIndex(function(r){return r.includes("fpf")||r.includes("datofpf")||"dato"===r});if(-1===i||-1===c)throw new Error("Columnas requeridas no encontradas. Columnas disponibles: ".concat(r.join(", ")));var t=Array.from(document.querySelectorAll("#tableBody tr")).map(function(r,t){var e=Array.from(r.querySelectorAll("td")),o=e[i].textContent.trim(),a=e[c].textContent.trim(),n=parseInt(o),l=parseFloat(a);return isNaN(n)||isNaN(l)?(console.warn("Valores inválidos en fila ".concat(t,":"),{dia:o,fpf:a}),null):{dia:n,datoFPF:l}}).filter(function(r){return null!==r});if(0===t.length)throw new Error("No se pudieron procesar los datos de la tabla");return t.sort(function(r,t){return r.dia-t.dia}),{labels:t.map(function(r){return"Día ".concat(r.dia)}),datasets:[{label:"Dato FPF",data:t.map(function(r){return r.datoFPF}),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0,pointRadius:5,pointHoverRadius:7}]}}catch(r){throw console.error("Error al obtener datos para la gráfica:",r),r}}function createOrUpdateChart(){try{var r=document.getElementById("chartContainer"),t=document.getElementById("dataChart").getContext("2d");currentChart&&currentChart.destroy();var e=getChartDataFromTable();currentChart=new Chart(t,{type:"line",data:e,options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Evolución del Dato FPF por Día",font:{size:16}},legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(r){return"FPF: ".concat(r.parsed.y.toFixed(2))}}}},scales:{y:{beginAtZero:!1,title:{display:!0,text:"Dato FPF",font:{size:14}}},x:{title:{display:!0,text:"Día",font:{size:14}},ticks:{maxRotation:45,minRotation:45}}}}}),r.style.display="block"}catch(r){console.error("Error al crear la gráfica:",r),showError("Error al crear la gráfica: "+r.message)}}function showError(r){var t=document.getElementById("error");t.textContent=r,t.style.display="block",console.error("Error:",r)}function clearError(){var r=document.getElementById("error");r.style.display="none",r.textContent=""}
//# sourceMappingURL=grafica.min.js.map
