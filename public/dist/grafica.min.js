"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdateChart=createOrUpdateChart,exports.showError=showError,exports.clearError=clearError;var currentChart=null;function createOrUpdateChart(){try{var t=getDataFromTable();if(console.log("Datos filtrados obtenidos para la gráfica:",t),!t||0===t.length)throw new Error("No hay datos válidos para graficar");var e=t.sort(function(t,e){return t.dia-e.dia});console.log("Número de datos a graficar:",e.length);var r=document.getElementById("chartContainer");currentChart&&currentChart.destroy();var o=document.getElementById("dataChart").getContext("2d");currentChart=new Chart(o,{type:"line",data:{labels:e.map(function(t){return"Día ".concat(t.dia)}),datasets:[{label:"Dato FPF",data:e.map(function(t){return t.datoFPF}),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.2)",borderWidth:2,tension:.3,fill:!0,pointStyle:"circle",pointRadius:5,pointHoverRadius:8,pointBackgroundColor:"rgb(53, 162, 235)",pointBorderColor:"white",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Evolución del Dato FPF",font:{size:16,weight:"bold"},padding:20},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#666",borderColor:"rgba(53, 162, 235, 0.3)",borderWidth:1,padding:10,displayColors:!1,callbacks:{label:function(t){return"FPF: ".concat(t.parsed.y.toFixed(2))}}},legend:{display:!0,position:"top"}},scales:{x:{title:{display:!0,text:"Día",font:{size:14,weight:"bold"}},ticks:{maxRotation:45,minRotation:45}},y:{title:{display:!0,text:"Dato FPF",font:{size:14,weight:"bold"}},beginAtZero:!0,ticks:{callback:function(t){return t.toFixed(2)}}}}}}),r.style.display="block",console.log("Datos graficados:",{totalPuntos:e.length,diasGraficados:e.map(function(t){return t.dia}),valoresFPF:e.map(function(t){return t.datoFPF})})}catch(t){console.error("Error al crear el gráfico:",t),showError("Error al crear el gráfico: "+t.message)}}function getDataFromTable(){var t=Array.from(document.querySelectorAll('#tableBody tr:not([style*="display: none"]):not(.hidden)'));console.log("Número de filas visibles encontradas:",t.length);var e=Array.from(document.querySelectorAll("#tableHeader th")).map(function(t){return{text:t.textContent.trim().toLowerCase(),index:t.cellIndex}}),l=e.find(function(t){return t.text.includes("dia")||t.text.includes("día")||"day"===t.text}),s=e.find(function(t){return t.text.includes("datofpf")||t.text.includes("dato fpf")||t.text.includes("fpf")});if(!l||!s)throw new Error("Columnas no encontradas. Encabezados disponibles: ".concat(e.map(function(t){return t.text}).join(", ")));var r=t.map(function(t,e){var r=Array.from(t.cells);if(r.length<=Math.max(l.index,s.index))return console.warn("Fila ".concat(e," no tiene suficientes columnas")),null;var o=r[l.index].textContent.trim(),a=r[s.index].textContent.trim(),n=parseInt(o.replace(/[^\d.-]/g,"")),i=parseFloat(a.replace(/[^\d.-]/g,""));return isNaN(n)||isNaN(i)?(console.warn("Valores inválidos en fila ".concat(e,":"),{dia:o,datoFPF:a}),null):{dia:n,datoFPF:i}}).filter(function(t){return null!==t});if(0===r.length)throw new Error("No se encontraron datos válidos para graficar en las filas visibles");return console.log("Datos procesados de filas visibles:",r),r}function showError(t){var e=document.getElementById("error");e&&(e.textContent=t,e.style.display="block",setTimeout(function(){e.style.display="none"},5e3)),console.error(t)}function clearError(){var t=document.getElementById("error");t&&(t.style.display="none",t.textContent="")}
//# sourceMappingURL=grafica.min.js.map
